package TestAbstractDirection
public
	Data D
	end D;
	
	system SrcSys
		features
			f0: feature;
			
			out_feature: out feature;
			in_feature: in feature;
	end SrcSys;
	
	system SrcSysIn extends SrcSys
		features
			f0: refined to in feature;
	end SrcSysIn;
	
	system SrcSysOut extends SrcSys
		features
			f0: refined to out feature;
	end SrcSysOut;
	
	system DestSys
		features
			f0: feature;
			
			out_feature: out feature;
			in_feature: in feature;
	end DestSys;
	
	system DestSysIn extends DestSys
		features
			f0: refined to in feature;
	end DestSysIn;
	
	system DestSysOut extends DestSys
		features
			f0: refined to out feature;
	end DestSysOut;
	
	system Top
	end Top;
	
	system implementation Top.i0
		subcomponents
			srcSys: system SrcSys;
			destSys: system DestSys;
		connections
			c0: feature srcSys.f0 -> destSys.f0;
			
			out_to_out: feature srcSys.out_feature -> destSys.out_feature;
			out_to_in: feature srcSys.out_feature -> destSys.in_feature;
			in_to_out: feature srcSys.in_feature -> destSys.out_feature;
			in_to_in: feature srcSys.in_feature -> destSys.in_feature;
		properties
			Classifier_Substitution_Rule => Type_Extension;
	end Top.i0;
	
	system implementation Top.out_to_out extends Top.i0
		subcomponents
			srcSys: refined to system SrcSysOut;
			destSys: refined to system DestSysOut;
	end Top.out_to_out;
	
	system implementation Top.out_to_in extends Top.i0
		subcomponents
			srcSys: refined to system SrcSysOut;
			destSys: refined to system DestSysIn;
	end Top.out_to_in;
	
	system implementation Top.in_to_out extends Top.i0
		subcomponents
			srcSys: refined to system SrcSysIn;
			destSys: refined to system DestSysOut;
	end Top.in_to_out;
	
	system implementation Top.in_to_in extends Top.i0
		subcomponents
			srcSys: refined to system SrcSysIn;
			destSys: refined to system DestSysIn;
	end Top.in_to_in;
end TestAbstractDirection;
